@model WordAnalyzer.Infrastructure.Commands.LoadText

<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="utf-8" />
    <title>WordAnalyzer</title>
    <style>
        body
        {
            position:absolute;
            top: 0px;
            left: 0px;
            width: 99%;
            height: 99%;
        }

        #buttons
        {
            display: none;
        }

        #frontLogic
        {
            float: left;
            width: 40%;
            height: 94%;
        }

        textarea
        {
            width: 100%;
            height: 100%;
        }

        #result
        {
            float: left;
            margin-left: 2%;
            width: 58%;
            height: 94%;
        }

        #output
        {
            width: 100%;
            height: 100%;
        }
    </style>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
    <script type="text/javascript">
        $(function()
        {
            var $textArea = $('#textArea');
            var $output = $('#output')

            $('#loadOrder').on('click', function()
            {

                if ($textArea.val().length > 0)
                {
                    var order = {
                        text : $textArea.val()
                    };

                    $.ajax({
                        type: 'POST',
                        url: '/converts/load',
                        data: order,
                        statusCode: {
                            201: function(newOrder) {
                                $('#buttons').css('display', 'block');
                            },
                            204: function() {
                                alert('Error, please insert text');
                            }
                        },
                        error: function()
                        {
                            alert('error while loading data');
                        }
                    });
                };
            })

            $('#toXml').on('click', function()
            {
                $.ajax({
                    type: 'GET',
                    url: '/converts/ConvertToXml',
                    success: function(output)
                    {
                        console.log('output', output);
                        $output.html(output);
                    },
                    error: function()
                    {
                        alert('error during conversion to xml');
                    }
                });
            })

            $('#toCsv').on('click', function()
            {
                $.ajax({
                    type: 'GET',
                    url: '/converts/ConvertToCsv',
                    success: function(output)
                    {
                        $output.html(output);
                    },
                    error: function()
                    {
                        alert('error during conversion to csv');
                    }
                });
            })
        })
    </script>
</head>
<body>
    <div id="frontLogic">
        <textarea id="textArea" name = "Text">Enter text...</textarea>
        <br>
        <input id="loadOrder" type="button" value="Load text" style="float: left;">

        <div id="buttons">
            <button id="toXml" type="button">Convert to XML</button>
            <button id="toCsv" type="button">Convert to CSV</button>
        </div>
    </div>
    <div id="result">
        <textarea id="output" style="border:none;"></textarea>
    </div>
    <div style="clear:both;"></div>
</body>
</html>